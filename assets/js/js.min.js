const ancho_pantalla=$(window).width(),alto_pantalla=$(window).height(),year=(new Date).getFullYear(),alto_cabecera=$("header").outerHeight(!0);var today=new Date,date=today.getDate()+"/"+(today.getMonth()+1)+"/"+today.getFullYear(),time=today.getHours()+":"+today.getMinutes();$(document).ready((function(){$("body").css("padding-top",alto_cabecera+"px");let top_search=alto_cabecera+10;$(".search").css("top",top_search+"px"),altos_mixtos(),$("#time").html(time),$("#date").html(date),activeOption(),$("#cats_menu a").click((function(e){e.preventDefault();let cat=$(this).attr("data-cat"),cat_title=$(this).attr("title");catStorage(cat,cat_title),location.href=$(this).attr("href")})),$("#back").click((function(e){goBack()})),$("#year").html(year),$("#search_trigger").click((function(){$(this).addClass("active"),$(".search").addClass("on"),$(".search input").trigger("focus")})),$("#close_search").click((function(){$("#search_trigger").removeClass("active"),$(".search input").trigger("blur"),$(".search").removeClass("on")})),$(".search input").keydown((function(e){let search_txt=$(this).val();13==e.which&&(e.preventDefault(),search_txt.length>0&&$("#search_form").submit())})),$("#submit_search").click((function(){""!=$(".search input").val()&&$("#search_form").submit()})),$("#abrir_politica").click((function(e){e.stopPropagation(),e.preventDefault(),$("body").addClass("popuped")})),$(".cerrar_popup").click((function(){$("body").removeClass("popuped")})),$(".fixed_err .close").click((function(){$("body").removeClass("errored"),$(".fixed_err .txt").html("")})),$("#ok_err").click((function(){$("body").removeClass("errored"),$(".fixed_err .txt").html("")})),$("#submit_newsletter").click((function(){let email=$('input[name="nl_email"]').val(),email_valid=validEmail(email);email_valid.valid?$("#newsletter_form").submit():fixedError("Newsletter",email_valid.msg)})),ancho_pantalla<=768?($("nav.menu").css("top",alto_cabecera+"px"),$(".toggle_menu").click((function(){$("body").toggleClass("menu_on")}))):$("body").removeClass("menu_on"),$(".btn_top").click((function(){return $("html, body").animate({scrollTop:0},1e3),!1})),alto_inner_content(),-1!==window.location.href.indexOf("search_txt")&&getBusqueda()})),$(window).on("load",(function(){setTimeout((function(){$(".loader").fadeOut("slow")}),900),altos_mixtos()}));let lastScrollTop=0;$(window).scroll((function(event){let scroll=$(window).scrollTop(),max_scroll=$(document).height()-$(window).height(),current_scroll,perc_scroll=100*$(window).scrollTop()/max_scroll;perc_scroll>25?$(".btn_top").addClass("on"):$(".btn_top").removeClass("on");let perc_fill=100-perc_scroll;$(".fill").css("top",perc_fill+"%"),lastScrollTop=scroll})),$(window).on("orientationchange",(function(){altos_mixtos()})),$(window).on("resize",(function(){altos_mixtos()}));const getBusqueda=()=>{let url_exploded,param_exploded,search_txt=window.location.href.split("search_txt")[1].split("=")[1];$("#searched_txt").html(search_txt)},altos_mixtos=()=>{$(".misc").length>0&&ancho_pantalla>1023&&$(".misc").each((function(index){let item=$(".misc").eq(index),alto_grid=item.children(".grid").outerHeight(!0)-30;item.children(".fullwidth").find("img").css("height",alto_grid+"px")}))},alto_inner_content=()=>{let alto_pie=$("footer").outerHeight(!0),min_alto_content=alto_pantalla-alto_cabecera-alto_pie-40;1==$(".text_content").length?$(".text_content").css("min-height",min_alto_content+"px"):1==$(".new_content").length?$(".new_details").css("min-height",min_alto_content+"px"):1==$(".search_content").length&&$(".search_content").css("min-height",min_alto_content+"px")},goBack=()=>{localStorage.removeItem("prev_category"),localStorage.removeItem("prev_category_title"),localStorage.removeItem("category"),localStorage.removeItem("category_title"),window.location.href="./"},catStorage=(cat,cat_title)=>{if(null!==localStorage.getItem("category")){let prev_cat=localStorage.getItem("category"),prev_cat_title=localStorage.getItem("category_title");localStorage.setItem("prev_category",prev_cat),localStorage.setItem("prev_category_title",prev_cat_title)}localStorage.setItem("category",cat),localStorage.setItem("category_title",cat_title)},activeOption=()=>{let stored_cat=localStorage.getItem("category"),stored_cat_title=localStorage.getItem("category_title");$(".menu a").removeClass("active"),-1!==window.location.href.indexOf("category")&&(""!=stored_cat&&$('.menu a[data-cat="'+stored_cat+'"]').addClass("active"),1==$("#cat_title").length&&$("#cat_title").html(stored_cat_title))},fixedError=(title,txt)=>{""==title&&(title="Error"),""==txt&&(txt="Error"),$(".fixed_err .title").html(title),$(".fixed_err .txt").html(txt),$("body").addClass("errored")},validarContacto=()=>{let nombre=$('#contacto input[name="nombre"]'),telefono=$('#contacto input[name="telefono"]'),email=$('#contacto input[name="email"]'),mensaje=$('#contacto textarea[name="mensaje"]'),politica=$('#contacto input[name="politica"]');""==nombre.val()||nombre.val().length<2?(nombre.addClass("errored"),nombre.parent().append('<span class="error_form">Introduce tu nombre</span>')):nombre.removeClass("errored"),telefono.val().length>0&&telefono.val().length<9?(telefono.addClass("errored"),telefono.parent().append('<span class="error_form">El teléfono no es válido</span>')):telefono.removeClass("errored"),""==email.val()?(email.addClass("errored"),email.parent().append('<span class="error_form">Introduce tu email</span>')):(emailValido=validEmail(email.val()),emailValido.valid?email.removeClass("errored"):(email.parent().append('<span class="error_form">'+emailValido.msg+"</span>"),email.addClass("errored"))),""==mensaje.val()&&mensaje.val().length<5?(mensaje.addClass("errored"),mensaje.parent().append('<span class="error_form">El mensaje es obligatorio (Min. 5 caracteres)</span>')):mensaje.removeClass("errored"),politica.prop("checked")?politica.siblings(".checkbox").removeClass("errored"):politica.siblings(".checkbox").addClass("errored"),$(".error_form").length>0?setTimeout((function(){$(".error_form").remove(),$("#contacto input").removeClass("errored"),$("#contacto textarea").removeClass("errored"),$("#contacto .checkbox").removeClass("errored")}),4e3):$("#form_contacto").submit()},validEmail=email=>{let resp={valid:!0,msg:""};if(email.length<7)resp.valid=!1;else{let index_arroba=email.indexOf("@"),index_punto=email.indexOf(".");if(-1===index_arroba||-1===index_punto)resp.valid=!1;else{let division;-1===email.split("@")[1].indexOf(".")&&(resp.valid=!1)}}return resp.valid||(resp.msg="Email no válido"),resp};